(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"6+PL":function(n,t,e){"use strict";e.d(t,"a",(function(){return c}));var o=e("lJxs"),i=e("fXoL"),r=e("I/3d"),a=e("tyNb"),c=function(){function n(n,t){this.afs=n,this.rout=t,this.anuncios=[],this.info=[]}return n.prototype.goto=function(n){this.rout.navigateByUrl(n)},n.prototype.getProfile=function(n){var t=this;return this.itemsCollection=this.afs.collection("users/"+n+"/profile/"),this.itemsCollection.snapshotChanges().pipe(Object(o.a)((function(n){t.info=[];for(var e=0,o=n;e<o.length;e++)t.info.unshift(o[e]);return t.info})))},n.prototype.createUser=function(n){var t=this;return new Promise((function(e,o){t.afs.collection("users/"+n.uid+"/profile").add({name:n.name,phone:n.phone,mail:n.mail,img:n.img,uid:n.uid,adress:n.adress,date:Date.now(),username:n.username}),t.rout.navigateByUrl("profile")}))},n.prototype.updateUser=function(n,t){return this.afs.collection("users").doc(n.uid).collection("profile").doc(t).set(n)},n.prototype.AddEntry=function(n){var t=this,e=Math.random().toString(36).substring(2);return new Promise((function(o,i){t.afs.collection("entrys").doc(e).set({description:n,id:e,date:Date.now()}),t.rout.navigateByUrl("profile")}))},n.prototype.getEntrys=function(){var n=this;return this.itemsCollection=this.afs.collection("entrys"),this.itemsCollection.snapshotChanges().pipe(Object(o.a)((function(t){n.info=[];for(var e=0,o=t;e<o.length;e++)n.info.unshift(o[e]);return n.info})))},n.\u0275fac=function(t){return new(t||n)(i.Pb(r.a),i.Pb(a.f))},n.\u0275prov=i.Eb({token:n,factory:n.\u0275fac,providedIn:"root"}),n}()},Wvzw:function(n,t,e){"use strict";e.r(t),e.d(t,"EditProfilePageModule",(function(){return v}));var o=e("ofXK"),i=e("3Pt+"),r=e("tyNb"),a=e("TEn/"),c=e("6+PL"),s=e("nYR2"),l=e("fXoL"),u=e("Vaw3"),p=e("UbJi"),d=function(n,t,e,o){return new(e||(e=Promise))((function(i,r){function a(n){try{s(o.next(n))}catch(t){r(t)}}function c(n){try{s(o.throw(n))}catch(t){r(t)}}function s(n){var t;n.done?i(n.value):(t=n.value,t instanceof e?t:new e((function(n){n(t)}))).then(a,c)}s((o=o.apply(n,t||[])).next())}))},g=function(n,t){var e,o,i,r,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:c(0),throw:c(1),return:c(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function c(r){return function(c){return function(r){if(e)throw new TypeError("Generator is already executing.");for(;a;)try{if(e=1,o&&(i=2&r[0]?o.return:r[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,r[1])).done)return i;switch(o=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return a.label++,{value:r[1],done:!1};case 5:a.label++,o=r[1],r=[0];continue;case 7:r=a.ops.pop(),a.trys.pop();continue;default:if(!((i=(i=a.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){a=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){a.label=r[1];break}if(6===r[0]&&a.label<i[1]){a.label=i[1],i=r;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(r);break}i[2]&&a.ops.pop(),a.trys.pop();continue}r=t.call(n,a)}catch(c){r=[6,c],o=0}finally{e=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,c])}}},f=["imageProd"];function b(n,t){if(1&n&&l.Jb(0,"img",25),2&n){var e=l.Vb();l.bc("src",e.img,l.gc)}}function h(n,t){if(1&n&&(l.Jb(0,"img",25),l.Wb(1,"async")),2&n){var e=l.Vb();l.ac("src",l.Xb(1,1,e.urlImage),l.gc)}}function m(n,t){1&n&&l.Jb(0,"img",26)}var y=[{path:"",component:function(){function n(n,t,e,o,i){this.roouter=n,this.services=t,this.afs=e,this.loadingController=o,this.auth=i}return n.prototype.ngOnInit=function(){this.getUser()},n.prototype.getUser=function(){var n=this;this.auth.authState.subscribe((function(t){t&&(n.mail=t.email,n.uid=t.uid,console.log(n.mail),n.getProfile(n.uid))}))},n.prototype.getProfile=function(n){return d(this,void 0,void 0,(function(){var t=this;return g(this,(function(e){return this.services.getProfile(n).subscribe((function(n){console.log(n),0!==n.length?(console.log(n[0].payload.doc),t.cp=!0,t.id=n[0].payload.doc.id,t.name=n[0].payload.doc.data().name,t.phone=n[0].payload.doc.data().phone,t.about=n[0].payload.doc.data().about,t.img=n[0].payload.doc.data().img,t.username=n[0].payload.doc.data().username,console.log("profile full")):(t.cp=!1,console.log("profile empty"))})),[2]}))}))},n.prototype.onUpload=function(n){var t=this;console.log(n.target.files[0]);var e=Math.random().toString(36).substring(2),o=n.target.files[0],i="image/pic_"+e,r=this.afs.ref(i),a=this.afs.upload(i,o);this.uploadPercent=a.percentageChanges(),this.presentLoading(),a.snapshotChanges().pipe(Object(s.a)((function(){return t.urlImage=r.getDownloadURL()}))).subscribe()},n.prototype.save=function(n,t,e,o){var i=this;console.log(this.cp);var r={name:n,phone:t,mail:this.mail,img:this.inputimageProd.nativeElement.value||this.img,about:e,uid:this.uid,username:o||"null"};console.log(r),!1===this.cp?this.services.createUser(r).then((function(n){console.log("Upload"+n),i.roouter.navigateByUrl("/profile")})):this.services.updateUser(r,this.id).then((function(n){console.log("Upload"+n),i.roouter.navigateByUrl("/profile")}))},n.prototype.presentLoading=function(){return d(this,void 0,void 0,(function(){var n;return g(this,(function(t){switch(t.label){case 0:return[4,this.loadingController.create({message:"Loading image",duration:2e3})];case 1:return[4,(n=t.sent()).present()];case 2:return t.sent(),[4,n.onDidDismiss()];case 3:return t.sent(),console.log("Loading dismissed!"),[2]}}))}))},n.prototype.moveFocus=function(n){n.setFocus()},n.\u0275fac=function(t){return new(t||n)(l.Ib(r.f),l.Ib(c.a),l.Ib(u.a),l.Ib(a.K),l.Ib(p.a))},n.\u0275cmp=l.Cb({type:n,selectors:[["app-edit-profile"]],viewQuery:function(n,t){var e;1&n&&l.ic(f,!0),2&n&&l.dc(e=l.Ub())&&(t.inputimageProd=e.first)},decls:45,vars:11,consts:[["no-border",""],["slot","end","padding",""],["slot","end",3,"click"],["padding",""],[1,"form"],["text-center",""],["class","circle",3,"src",4,"ngIf"],["src","assets/user.svg","width","200px",4,"ngIf"],["margin-bottom","","margin-top","","text-center",""],[1,"custom-file-upload",2,"margin","auto","max-width","400px"],["id","file-upload","placeholder","Seleciona imagen","type","file","accept",".png, .jpg",3,"change"],["margin-right","","name","cloud-download"],[1,"goodfont"],["placeholder","username",3,"ngModel","ngModelChange","keyup.enter"],["name","at","slot","start"],["margin-bottom","","margin-bottom",""],["type","text","placeholder","Name",3,"ngModel","keyup.enter","ngModelChange"],["b",""],["type","text","placeholder","Phone",3,"ngModel","keyup.enter","ngModelChange"],["c",""],["disabled","",3,"ngModel","ngModelChange"],["type","text","placeholder","About",3,"ngModel","keyup.enter","ngModelChange"],["d",""],["type","hidden",2,"color","black",3,"value"],["imageProd",""],[1,"circle",3,"src"],["src","assets/user.svg","width","200px"]],template:function(n,t){if(1&n){var e=l.Mb();l.Lb(0,"ion-header",0),l.Lb(1,"ion-toolbar",0),l.Lb(2,"ion-title"),l.kc(3,"Edit Profile"),l.Kb(),l.Lb(4,"ion-buttons",1),l.Lb(5,"ion-button",2),l.Tb("click",(function(){return t.save(t.name,t.phone,t.about,t.username)})),l.kc(6,"Save"),l.Kb(),l.Kb(),l.Kb(),l.Kb(),l.Lb(7,"ion-content",3),l.Lb(8,"div",4),l.Lb(9,"div",5),l.jc(10,b,1,1,"img",6),l.jc(11,h,2,3,"img",6),l.Jb(12,"br"),l.Jb(13,"br"),l.jc(14,m,1,0,"img",7),l.Jb(15,"br"),l.Kb(),l.Lb(16,"div",8),l.Lb(17,"label",9),l.Lb(18,"input",10),l.Tb("change",(function(n){return t.onUpload(n)})),l.Kb(),l.Jb(19,"ion-icon",11),l.kc(20," Select profile photo "),l.Kb(),l.Kb(),l.Jb(21,"br"),l.Lb(22,"h3",12),l.kc(23,"Profile info"),l.Kb(),l.Jb(24,"br"),l.Lb(25,"ion-item"),l.Lb(26,"ion-input",13),l.Tb("ngModelChange",(function(n){return t.username=n}))("keyup.enter",(function(){l.fc(e);var n=l.ec(31);return t.moveFocus(n)})),l.Kb(),l.Jb(27,"ion-icon",14),l.Kb(),l.Jb(28,"br"),l.Lb(29,"ion-item",15),l.Lb(30,"ion-input",16,17),l.Tb("keyup.enter",(function(){l.fc(e);var n=l.ec(34);return t.moveFocus(n)}))("ngModelChange",(function(n){return t.name=n})),l.Kb(),l.Kb(),l.Lb(32,"ion-item",15),l.Lb(33,"ion-input",18,19),l.Tb("keyup.enter",(function(){l.fc(e);var n=l.ec(39);return t.moveFocus(n)}))("ngModelChange",(function(n){return t.phone=n})),l.Kb(),l.Kb(),l.Lb(35,"ion-item",15),l.Lb(36,"ion-input",20),l.Tb("ngModelChange",(function(n){return t.mail=n})),l.Kb(),l.Kb(),l.Lb(37,"ion-item",15),l.Lb(38,"ion-textarea",21,22),l.Tb("keyup.enter",(function(){return t.save(t.name,t.phone,t.about)}))("ngModelChange",(function(n){return t.about=n})),l.Kb(),l.Kb(),l.Jb(40,"input",23,24),l.Wb(42,"async"),l.Jb(43,"br"),l.Jb(44,"br"),l.Kb(),l.Kb()}2&n&&(l.yb(10),l.ac("ngIf",t.img&&!t.urlImage),l.yb(1),l.ac("ngIf",t.urlImage),l.yb(3),l.ac("ngIf",!t.urlImage&&!t.img),l.yb(12),l.ac("ngModel",t.username),l.yb(4),l.ac("ngModel",t.name),l.yb(3),l.ac("ngModel",t.phone),l.yb(3),l.ac("ngModel",t.mail),l.yb(2),l.ac("ngModel",t.about),l.yb(2),l.ac("value",l.Xb(42,9,t.urlImage)))},directives:[a.m,a.H,a.F,a.g,a.f,a.k,o.k,a.n,a.r,a.q,a.Q,i.d,i.e,a.E],pipes:[o.b],styles:[".welcome-card[_ngcontent-%COMP%]   ion-img[_ngcontent-%COMP%]{max-height:35vh;overflow:hidden}h4[_ngcontent-%COMP%]{color:#222428;font-size:17px;font-weight:700}#file-upload[_ngcontent-%COMP%]{font-size:14px}.titulo[_ngcontent-%COMP%]{color:#fcd000;font-size:24px}.titulo[_ngcontent-%COMP%], h1[_ngcontent-%COMP%]{font-weight:700}h1[_ngcontent-%COMP%]{font-size:40px;text-align:center}.boton[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{height:39px;border-radius:50px;font-size:17px;font-weight:700}.sep[_ngcontent-%COMP%]{margin-top:10px}h2[_ngcontent-%COMP%]{font-size:1.5rem;color:#232b38}.input-card[_ngcontent-%COMP%]{border-radius:5rem;background:#f5f6f7;box-shadow:0 3px 80px rgba(39,68,74,.2)}form.input-box[_ngcontent-%COMP%]{border:2px solid #c5cccd;border-radius:1rem;background:#fff;transition:all .2s}form.input-box[_ngcontent-%COMP%]:focus-within{border:2px solid #02c4d9}form.input-box[_ngcontent-%COMP%]:focus-within.error{border:2px solid #f54d3d}input[_ngcontent-%COMP%]{border:none;background:transparent;padding:1.125rem 1rem;width:95%;font-family:Poppins,sans-serif;font-weight:500;font-size:1.5rem;transition:all .2s}input[_ngcontent-%COMP%]:not(:last-child){border-bottom:2px solid #eceeee}input[_ngcontent-%COMP%]::-moz-placeholder{color:#9da8ab}input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#9da8ab}input[_ngcontent-%COMP%]::placeholder{color:#9da8ab}input[_ngcontent-%COMP%]:focus{outline:none;color:#08242a;padding:2rem 1rem}input[_ngcontent-%COMP%]:focus::-moz-placeholder{color:#758589}input[_ngcontent-%COMP%]:focus:-ms-input-placeholder{color:#758589}input[_ngcontent-%COMP%]:focus::placeholder{color:#758589}input.error[_ngcontent-%COMP%]{color:#f54d3d}input.success[_ngcontent-%COMP%]{color:#02c4d9}.buttone[_ngcontent-%COMP%]{position:relative;border:none;padding:1rem 3rem;margin:1rem;border-radius:99999px;font-size:1.5rem;font-weight:700;font-family:Poppins,sans-serif;transition:all .2s;transition-timing-function:ease}.buttone[_ngcontent-%COMP%]:hover{transform:translatey(3px)}.buttone[_ngcontent-%COMP%]:focus{outline:none}.buttone.teal[_ngcontent-%COMP%]{background-color:#02c4d9;box-shadow:0 7px 50px rgba(2,196,217,.5);color:#fff}.buttone.teal[_ngcontent-%COMP%]:hover{box-shadow:0 2px 10px rgba(2,196,217,.5)}.buttone.google[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 3px 20px rgba(39,68,74,.2);color:#506569;font-weight:600;font-size:22px;line-height:1rem}.buttone.google[_ngcontent-%COMP%] > img[_ngcontent-%COMP%]{height:20px;width:20px}.buttone.google[_ngcontent-%COMP%]:hover{box-shadow:0 1px 5px rgba(39,68,74,.2)}.ionicon[_ngcontent-%COMP%]{font-size:90px}.fileUpload[_ngcontent-%COMP%]{position:relative;overflow:hidden;margin:10px}.fileUpload[_ngcontent-%COMP%]   input.upload[_ngcontent-%COMP%]{position:absolute;top:0;right:0;margin:0;padding:0;font-size:20px;cursor:pointer;opacity:0;filter:alpha(opacity=0)}input[type=file][_ngcontent-%COMP%]{display:none}.custom-file-upload[_ngcontent-%COMP%]{border:1px solid #ccc;display:inline-block;padding:6px 12px;cursor:pointer;width:100%;text-align:center;color:var(--ion-color-primary)}"]}),n}()}],v=function(){function n(){}return n.\u0275mod=l.Gb({type:n}),n.\u0275inj=l.Fb({factory:function(t){return new(t||n)},imports:[[o.c,i.a,a.I,r.h.forChild(y)]]}),n}()}}]);