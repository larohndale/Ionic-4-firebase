(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"6+PL":function(t,n,o){"use strict";o.d(n,"a",(function(){return a}));var e=o("lJxs"),i=o("fXoL"),r=o("I/3d"),c=o("tyNb"),a=function(){function t(t,n){this.afs=t,this.rout=n,this.anuncios=[],this.info=[]}return t.prototype.goto=function(t){this.rout.navigateByUrl(t)},t.prototype.getProfile=function(t){var n=this;return this.itemsCollection=this.afs.collection("users/"+t+"/profile/"),this.itemsCollection.snapshotChanges().pipe(Object(e.a)((function(t){n.info=[];for(var o=0,e=t;o<e.length;o++)n.info.unshift(e[o]);return n.info})))},t.prototype.createUser=function(t){var n=this;return new Promise((function(o,e){n.afs.collection("users/"+t.uid+"/profile").add({name:t.name,phone:t.phone,mail:t.mail,img:t.img,uid:t.uid,adress:t.adress,date:Date.now(),username:t.username}),n.rout.navigateByUrl("profile")}))},t.prototype.updateUser=function(t,n){return this.afs.collection("users").doc(t.uid).collection("profile").doc(n).set(t)},t.prototype.AddEntry=function(t){var n=this,o=Math.random().toString(36).substring(2);return new Promise((function(e,i){n.afs.collection("entrys").doc(o).set({description:t,id:o,date:Date.now()}),n.rout.navigateByUrl("profile")}))},t.prototype.getEntrys=function(){var t=this;return this.itemsCollection=this.afs.collection("entrys"),this.itemsCollection.snapshotChanges().pipe(Object(e.a)((function(n){t.info=[];for(var o=0,e=n;o<e.length;o++)t.info.unshift(e[o]);return t.info})))},t.\u0275fac=function(n){return new(n||t)(i.Pb(r.a),i.Pb(c.f))},t.\u0275prov=i.Eb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},XpXM:function(t,n,o){"use strict";o.r(n),o.d(n,"MainPageModule",(function(){return d}));var e=o("ofXK"),i=o("3Pt+"),r=o("tyNb"),c=o("TEn/"),a=o("6+PL"),s=o("fXoL"),u=o("UbJi"),l=function(t,n,o,e){return new(o||(o=Promise))((function(i,r){function c(t){try{s(e.next(t))}catch(n){r(n)}}function a(t){try{s(e.throw(t))}catch(n){r(n)}}function s(t){var n;t.done?i(t.value):(n=t.value,n instanceof o?n:new o((function(t){t(n)}))).then(c,a)}s((e=e.apply(t,n||[])).next())}))},f=function(t,n){var o,e,i,r,c={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return r={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(r[Symbol.iterator]=function(){return this}),r;function a(r){return function(a){return function(r){if(o)throw new TypeError("Generator is already executing.");for(;c;)try{if(o=1,e&&(i=2&r[0]?e.return:r[0]?e.throw||((i=e.return)&&i.call(e),0):e.next)&&!(i=i.call(e,r[1])).done)return i;switch(e=0,i&&(r=[2&r[0],i.value]),r[0]){case 0:case 1:i=r;break;case 4:return c.label++,{value:r[1],done:!1};case 5:c.label++,e=r[1],r=[0];continue;case 7:r=c.ops.pop(),c.trys.pop();continue;default:if(!((i=(i=c.trys).length>0&&i[i.length-1])||6!==r[0]&&2!==r[0])){c=0;continue}if(3===r[0]&&(!i||r[1]>i[0]&&r[1]<i[3])){c.label=r[1];break}if(6===r[0]&&c.label<i[1]){c.label=i[1],i=r;break}if(i&&c.label<i[2]){c.label=i[2],c.ops.push(r);break}i[2]&&c.ops.pop(),c.trys.pop();continue}r=n.call(t,c)}catch(a){r=[6,a],e=0}finally{o=i=0}if(5&r[0])throw r[1];return{value:r[0]?r[1]:void 0,done:!0}}([r,a])}}};function p(t,n){if(1&t&&(s.Lb(0,"ion-card-content"),s.Lb(1,"h1",8),s.kc(2),s.Kb(),s.Kb()),2&t){var o=n.$implicit;s.yb(2),s.mc("Welcome back ",o.payload.doc.data().name," !")}}var b=function(){return["/profile"]},h=[{path:"",component:function(){function t(t,n,o){this.aut=t,this.router=n,this.services=o}return t.prototype.ngOnInit=function(){this.logued()},t.prototype.logued=function(){var t=this;this.aut.authState.subscribe((function(n){n?(console.log("loged"),t.id=n.uid,console.log(t.id),t.getProfile(t.id)):t.router.navigateByUrl("/login")}),(function(){}))},t.prototype.signOut=function(){return l(this,void 0,void 0,(function(){var t;return f(this,(function(n){switch(n.label){case 0:return[4,this.aut.signOut()];case 1:return t=n.sent(),console.log(t),this.router.navigateByUrl("/login"),[2]}}))}))},t.prototype.getProfile=function(t){return l(this,void 0,void 0,(function(){var n=this;return f(this,(function(o){switch(o.label){case 0:return[4,this.services.getProfile(t).subscribe((function(t){0===t.length?(console.log("profile empty"),n.router.navigateByUrl("edit-profile")):(console.log("Profile not empty"),console.log(t),n.item=t)}))];case 1:return o.sent(),[2]}}))}))},t.prototype.profile=function(){this.router.navigateByUrl("profile")},t.\u0275fac=function(n){return new(n||t)(s.Ib(u.a),s.Ib(r.f),s.Ib(a.a))},t.\u0275cmp=s.Cb({type:t,selectors:[["app-main"]],decls:13,vars:3,consts:[["no-border",""],["slot","start"],[3,"routerLink"],["color","primary","slot","icon-only","name","contact"],["padding",""],[1,"form"],["color","","mode","ios"],[4,"ngFor","ngForOf"],[1,"goodfont"]],template:function(t,n){1&t&&(s.Lb(0,"ion-header",0),s.Lb(1,"ion-toolbar",0),s.Lb(2,"ion-title"),s.kc(3," Ionic 4 Firestart "),s.Kb(),s.Lb(4,"ion-buttons",1),s.Lb(5,"ion-button",2),s.Jb(6,"ion-icon",3),s.Kb(),s.Kb(),s.Kb(),s.Kb(),s.Lb(7,"ion-content",4),s.Lb(8,"div",5),s.Lb(9,"ion-card",6),s.jc(10,p,3,1,"ion-card-content",7),s.Kb(),s.Jb(11,"br"),s.Jb(12,"br"),s.Kb(),s.Kb()),2&t&&(s.yb(5),s.ac("routerLink",s.cc(2,b)),s.yb(5),s.ac("ngForOf",n.item))},directives:[c.m,c.H,c.F,c.g,c.f,c.P,r.g,c.n,c.k,c.h,e.j,c.i],styles:[""]}),t}()}],d=function(){function t(){}return t.\u0275mod=s.Gb({type:t}),t.\u0275inj=s.Fb({factory:function(n){return new(n||t)},imports:[[e.c,i.a,c.I,r.h.forChild(h)]]}),t}()}}]);